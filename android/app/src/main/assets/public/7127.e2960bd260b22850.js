"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7127],{7127:(J,p,t)=>{t.r(p),t.d(p,{AdminLogPageModule:()=>Y});var f=t(6814),s=t(95),l=t(6761),g=t(2692),v=t(5861),o=t(5879),x=t(6796),A=t(8022),P=t(74),C=t(5890);function y(n,a){1&n&&(o.TgZ(0,"div",14),o._uU(1,"EL campo de email no puede estar vac\xedo"),o.qZA())}function M(n,a){1&n&&(o.TgZ(0,"div",14),o._uU(1,"Debe ingresar un correo v\xe1lido"),o.qZA())}function T(n,a){if(1&n&&(o.TgZ(0,"div",12),o.YNc(1,y,2,0,"div",13),o.YNc(2,M,2,0,"div",13),o.qZA()),2&n){const r=o.oxw();o.xp6(1),o.Q6J("ngIf",null==r.form.controls.email.errors?null:r.form.controls.email.errors.required),o.xp6(1),o.Q6J("ngIf",null==r.form.controls.email.errors?null:r.form.controls.email.errors.email)}}function Z(n,a){1&n&&(o.TgZ(0,"div",14),o._uU(1,"EL campo de contrase\xf1a no puede estas vac\xedo"),o.qZA())}function L(n,a){if(1&n&&(o.TgZ(0,"div",12),o.YNc(1,Z,2,0,"div",13),o.qZA()),2&n){const r=o.oxw();o.xp6(1),o.Q6J("ngIf",null==r.form.controls.password.errors?null:r.form.controls.password.errors.required)}}const I=[{path:"",component:(()=>{var n;class a{constructor(e,i,d,c,m,u){this.navCtrl=e,this.afAuth=i,this.alertController=d,this.firestore=c,this.toastController=m,this.loadingController=u,this.form=new s.cw({email:new s.NI("",[s.kI.required,s.kI.email]),password:new s.NI("",[s.kI.required])})}ngOnInit(){}login(){var e=this;return(0,v.Z)(function*(){const i=yield e.loadingController.create({message:"Iniciando Sesi\xf3n",duration:5e3,translucent:!0,backdropDismiss:!1});if(yield i.present(),e.form.valid)try{const{email:d,password:c}=e.form.value;yield e.afAuth.signInWithEmailAndPassword(d,c);const m=yield e.afAuth.currentUser;if(m){const u=m.uid;e.firestore.collection("usuarios").doc(u).valueChanges().subscribe(h=>{h?"admin"===h.tipo?e.navCtrl.navigateRoot("/admin"):(console.log("No tiene rol de admin "),e.presentToast("No tienes el rol de ADMIN para ingresar")):console.log("Entro al otro N|2")})}yield i.dismiss()}catch(d){console.log("Error al inisiar sesi\xf3n: ",d),yield(yield e.alertController.create({header:"Error",message:"Credeciales invalidas, Intentelo denuevo:)",buttons:["ACEPTAR"]})).present()}})()}presentToast(e){var i=this;return(0,v.Z)(function*(){(yield i.toastController.create({message:e,duration:2e3,position:"top"})).present()})()}}return(n=a).\u0275fac=function(e){return new(e||n)(o.Y36(l.SH),o.Y36(x.zQ),o.Y36(l.Br),o.Y36(A.ST),o.Y36(l.yF),o.Y36(l.HT))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-admin-log"]],decls:17,vars:6,consts:[["title","Login"],[3,"fullscreen"],[1,"d-flex-center","div"],[1,"card"],[1,"auth-form",3,"ngSubmit"],["icon","mail-outline","autocomplete","email","type","email","label","Email",3,"control"],["class","validators",4,"ngIf"],["icon","lock-closed-outline","type","password","label","Contrase\xf1a","requiered","","autofocus","",3,"control"],["expand","block","shape","round","type","login",1,"iniciar",3,"disabled"],["slot","end","name","log-in"],["expand","block","fill","outline","routerLink","/home",1,"olvidar",2,"margin-top","20px"],["slot","end","name","log-out"],[1,"validators"],["class","mensaje",4,"ngIf"],[1,"mensaje"]],template:function(e,i){1&e&&(o._UZ(0,"app-header",0),o.TgZ(1,"ion-content",1)(2,"h1"),o._uU(3,"A D M I N"),o.qZA(),o.TgZ(4,"div",2)(5,"ion-card",3)(6,"form",4),o.NdJ("ngSubmit",function(){return i.login()}),o._UZ(7,"app-custom-input",5),o.YNc(8,T,3,2,"div",6),o._UZ(9,"app-custom-input",7),o.YNc(10,L,2,1,"div",6),o.TgZ(11,"ion-button",8),o._uU(12," Iniciar Sesi\xf3n "),o._UZ(13,"ion-icon",9),o.qZA(),o.TgZ(14,"ion-button",10),o._uU(15," Volve "),o._UZ(16,"ion-icon",11),o.qZA()()()()()),2&e&&(o.xp6(1),o.Q6J("fullscreen",!0),o.xp6(6),o.Q6J("control",i.form.controls.email),o.xp6(1),o.Q6J("ngIf",i.form.controls.email.errors&&i.form.controls.email.touched),o.xp6(1),o.Q6J("control",i.form.controls.password),o.xp6(1),o.Q6J("ngIf",i.form.controls.password.errors&&i.form.controls.password.touched),o.xp6(1),o.Q6J("disabled",i.form.invalid))},dependencies:[f.O5,s._Y,s.JL,s.F,l.YG,l.PM,l.W2,l.gu,l.YI,g.rH,P.G,C.O],styles:["ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:10px;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px;box-shadow:10px,5px,5px #000}ion-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px;font-family:Helvetica Neue;text-align:center;margin:30px auto}ion-content[_ngcontent-%COMP%]   .iniciar[_ngcontent-%COMP%]{margin-top:10px;height:40px;font-size:18px;text-transform:initial;border-radius:50px;box-shadow:1px 8px 8px #0000000d;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}ion-content[_ngcontent-%COMP%]   .olvidar[_ngcontent-%COMP%]{font-size:15px;text-transform:initial;box-shadow:1px 8px 8px #0000000d;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}ion-content[_ngcontent-%COMP%]   .mensaje[_ngcontent-%COMP%]{color:#ff0202;font-size:14px;display:grid;place-items:center}ion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px;font-size:15px;text-align:center;color:#000;opacity:90%;margin-top:20px}"]}),a})()},{path:"resgistrar",loadChildren:()=>Promise.all([t.e(1273),t.e(8592),t.e(5575)]).then(t.bind(t,5575)).then(n=>n.ResgistrarPageModule)},{path:"modificar",loadChildren:()=>Promise.all([t.e(1273),t.e(8592),t.e(2282)]).then(t.bind(t,2282)).then(n=>n.ModificarPageModule)},{path:"admin",loadChildren:()=>Promise.all([t.e(1273),t.e(8592),t.e(8763)]).then(t.bind(t,8763)).then(n=>n.AdminPageModule)}];let N=(()=>{var n;class a{}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[g.Bz.forChild(I),g.Bz]}),a})();var O=t(6208);let Y=(()=>{var n;class a{}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[f.ez,s.u5,l.Pc,N,O.m]}),a})()}}]);